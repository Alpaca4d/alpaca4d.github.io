<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Alpaca4d</title>
		<meta charset="utf-8">
		<meta name="author" content="Marco Pellegrino">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link type="text/css" rel="stylesheet" href="main_Alpaca4d.css">
		<link rel="icon" href= "images/logo_200_200.png">

	</head>

	<body>
		<ul>
			<li id="index" style="float:left"><a href="index.html">Alpaca4d</a></li>

			<li id="examples" style="float:right"><a href="examples.html">Examples</a></li>
			<li id="download" style="float:right"><a href='download.html'>Download</a></li>
			<!-- <li id="about" style="float:right"><a href="about.html">About</a></li> -->
		</ul>

		
		<script type="module">

			import * as THREE from './build/three.module.js';

			import { OrbitControls } from './examples/jsm/controls/OrbitControls.js';
			import { Rhino3dmLoader } from './examples/jsm/loaders/3DMLoader.js';

			// import { GUI } from './jsm/libs/dat.gui.module.js';

			let camera, scene, renderer;
			let controls;
			let gui;

			init();
			animate();

			function init() {

				THREE.Object3D.DefaultUp = new THREE.Vector3( 0, 0, 1 );
				

				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				
				renderer.outputEncoding = THREE.sRGBEncoding;
				document.body.appendChild( renderer.domElement );


				camera = new THREE.PerspectiveCamera( 80, window.innerWidth / window.innerHeight, 1, 1000 );
				camera.position.set( 0, -50, 20);

				// Background Settings
				scene = new THREE.Scene();
				scene.background = new THREE.Color( 0xffffff );



				// const directionalLight = new THREE.DirectionalLight( 0x0000ff, 20 );
				// directionalLight.position.set( 50, 0, 10 );
				// scene.add( directionalLight );



				const light = new THREE.HemisphereLight( 0xffffbb, 0x080820, 7 );
				scene.add( light );

				const loader = new Rhino3dmLoader();
				loader.setLibraryPath( 'https://cdn.jsdelivr.net/npm/rhino3dm@7.7.0/' );
				loader.load( 'examples/models/3dm/Alpaca4dModel.3dm', function ( object ) {

					
					scene.add( object );

					// hide spinner
					document.getElementById( 'loader' ).style.display = 'none';

				} );


				controls = new OrbitControls( camera, renderer.domElement );

				window.addEventListener( 'resize', resize );

			}

			function resize() {

				const width = window.innerWidth;
				const height = window.innerHeight;

				camera.aspect = width / height;
				camera.updateProjectionMatrix();

				renderer.setSize( width, height );
				

			}


			function animate() {
				
				render();
				requestAnimationFrame( animate );

			
			}

			function render() {

				const timer = Date.now() * 0.0005;

				camera.position.x = Math.cos( timer ) * 50;
				camera.position.y = Math.sin( timer ) * 75;

				camera.lookAt( scene.position );
				renderer.render( scene, camera );

			}




		</script>

	</body>
</html>